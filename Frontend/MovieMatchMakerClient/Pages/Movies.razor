@page "/movies"
@using MovieMatchMakerLib.Model;
@using MovieMatchMakerLib;
@using MovieMatchMakerLib.Client;
@using Microsoft.AspNetCore.Components.WebAssembly.Hosting

@inject IMovieConnectionsClient MovieConnectionsClient;
@inject IConfiguration Configuration;
@inject IWebAssemblyHostEnvironment HostEnvironment;


<PageTitle>Movies</PageTitle>

<MudDataGrid Items="@MovieConnectionsMovies">
             
    <Columns>
        <PropertyColumn Property="x => x.Title" />
        <PropertyColumn Property="x => x.ReleaseYear" />
        @if (HostEnvironment.IsDevelopment())
        {
            <PropertyColumn Property="x => x.MovieId" />
        }
    </Columns>

</MudDataGrid>


@code {
    public MovieConnection.List MovieConnections { get; set; } = new MovieConnection.List();
    public Movie.HashSet MovieConnectionsMovies { get; set; } = new Movie.HashSet();   

    protected override async Task OnInitializedAsync()
    {
        MovieConnections = await MovieConnectionsClient.GetAllMovieConnections();
        if (MovieConnections is not null)
        {
            MovieConnectionsMovies = MovieConnections.Movies;
        } 
    }    
}