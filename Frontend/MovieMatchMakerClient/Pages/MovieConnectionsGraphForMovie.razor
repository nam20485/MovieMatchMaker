@page "/movieconnectionsgraphformovie/{Title}/{ReleaseYear:int}"
@using MovieMatchMakerLib.Client;
@using MovieMatchMakerLib.Model;

@inject IMovieConnectionsClient MovieConnectionsClient
@inject ILogger<MovieConnectionsForMovie> Logger

<div>
    <MermaidDiagram MermaidMarkup="@_mermaidMarkup" />
</div>

@code {

    [Parameter]
    public string? Title { get; set; }

    [Parameter]
    public int ReleaseYear { get; set; }

    // private string _mermaidMarkup = @"journey
    //                                     title My working day
    //                                     section Go to work
    //                                     Make tea: 5: Me
    //                                     Go upstairs: 3: Me
    //                                     Do work: 1: Me, Cat
    //                                     section Go home
    //                                     Go downstairs: 5: Me
    //                                     Sit down: 5: Me";

    // private string _mermaidMarkup = @"graph TD;
    //                                     A-->B;
    //                                     A-->C;
    //                                     B-->D;
    //                                     C-->D;
    //                                     D-->E;";

    private string _mermaidMarkup;

    protected async override Task OnInitializedAsync()
    {
        _mermaidMarkup = await MovieConnectionsClient.GetMovieConnectionsGraphForMovie(Title, ReleaseYear);
    }

}